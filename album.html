<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Opium Music Player</title>
    <!-- Include Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            background: #000000;
            color: #ffffff;
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
        }
        .back-button {
            position: absolute;
            top: 10px;
            left: 10px;
            font-size: 1.5rem;
            color: #ffffff;
            background: none;
            border: none;
            cursor: pointer;
            transition: color 0.3s;
        }
        .back-button:hover {
            color: #1f8fff;
        }
        .album-container {
            padding: 20px;
            text-align: center;
        }
        .album-card {
            display: inline-block;
            margin: 20px;
            background: #1f1f1f;
            padding: 10px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.5);
        }
        .album-card img {
            width: 200px;
            height: 200px;
            border-radius: 6px;
            margin-bottom: 10px;
        }
        .album-card h3 {
            font-size: 1.5rem;
        }
        .album-card ul {
            list-style: none;
            padding: 0;
        }
        .album-card ul li {
            margin: 5px 0;
            display: flex;
            align-items: center;
            padding: 10px;
            background-color: #2c2c2c;
            border-radius: 5px;
            transition: background-color 0.3s;
        }
        .album-card ul li:hover {
            background-color: #444444;
        }
        .play-icon {
            color: #ffffff;
            font-size: 1.5rem;
            margin-right: 10px;
            cursor: pointer;
            transition: color 0.3s;
        }
        .play-icon:hover {
            color: #1f8fff;
        }
        .song-name {
            flex-grow: 1;
            text-align: left;
        }
        a {
            color: #ffffff;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <!-- Small Back Button -->
    <button class="back-button" onclick="window.location.href='play.html'">
        <i class="fa fa-arrow-left"></i>
    </button>

    <div class="album-container" id="albumContainer">
        <!-- Album details and songs -->
    </div>

    <script>
        // Function to get the query parameter from the URL
        function getQueryParameter(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }

        // Function to load the album based on the query
        function loadAlbum(albumName) {
            const albumData = {
                "LuvIsRage": {
                    "name": "Luv is rage[deluxe]",
                    "image": "images/luvisrage.jpeg",
                    "songs": [
                        "20 Min.mp3",
                        "444+222.mp3",
                        "Dark Queen.mp3",
                        "Diamonds All on My Wrist.mp3",
                        "Early 20 Rager.mp3",
                        "Feelings Mutual.mp3",
                        "For Real.mp3",
                        "How to Talk.mp3",
                        "Loaded.mp3",
                        "Malfunction.mp3",
                        "Neon Guts (feat. Pharrell Williams).mp3",
                        "No Sleep Leak.mp3",
                        "Pretty Mami.mp3",
                        "Sauce It Up.mp3",
                        "Skir Skirr.mp3",
                        "The Way Life Goes (feat. Oh Wonder).mp3",
                        "TwoÂ®.mp3",
                        "UnFazed (feat. The Weeknd).mp3",
                        "X.mp3",
                        "XO Tour Llif3.mp3"
                    ]
                }
            };

            const album = albumData[albumName];

            if (album) {
                const albumContainer = document.getElementById("albumContainer");

                // Create the album content dynamically
                albumContainer.innerHTML = `
                    <div class="album-card">
                        <img src="${album.image}" alt="${album.name}">
                        <h3>${album.name}</h3>
                        <ul>
                            ${album.songs.map(song => {
                                const songName = song.replace(".mp3", ""); // Remove .mp3 from the song name
                                const encodedAlbumName = encodeURIComponent(album.name);
                                const encodedSong = encodeURIComponent(song);
                                return `
                                    <li>
                                        <i class="fa fa-play play-icon" onclick="playSong('music/${encodedAlbumName}/${encodedSong}')"></i>
                                        <span class="song-name">${songName}</span>
                                    </li>
                                `;
                            }).join('')}
                        </ul>
                    </div>
                `;
            } else {
                document.getElementById("albumContainer").innerHTML = "<p>Album not found.</p>";
            }
        }

        // Function to play the song
        function playSong(songPath) {
            const audio = new Audio(songPath);

            // Ensure audio is loaded before playing
            audio.oncanplaythrough = () => {
                audio.play();
            };

            // Handle potential errors
            audio.onerror = () => {
                alert('Error playing the song. Please check the file path or format.');
            };
        }

        // Get the album name from the URL and load the album
        const albumName = getQueryParameter('album');
        if (albumName) {
            loadAlbum(albumName);
        } else {
            document.getElementById("albumContainer").innerHTML = "<p>No album specified.</p>";
        }
    </script>
</body>
</html>
